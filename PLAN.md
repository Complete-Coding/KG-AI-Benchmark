# KG AI Benchmark ‚Äì Implementation Plan

## Context
KG AI Benchmark is a React 19 + TypeScript application used to benchmark local LLMs running through LM Studio or an OpenAI-compatible endpoint. The UI overhaul (Tailwind migration, theme system, component refactors) is largely complete, and the next major milestone is stronger LM Studio integration so that administrators can discover installed models and manage default profiles without manual setup.

## Primary Outcomes
- Maintain the polished Tailwind-based UI and theme system already delivered.
- Expand intelligent defaults for benchmark configuration to reduce manual effort.
- Integrate directly with the LM Studio REST API so the app auto-discovers available models (including capabilities metadata) and surfaces them as ready-to-use profiles.
- Finish the remaining UI polish pass (spacing, status states, hover affordances) once the discovery work lands.

## Workstreams & Status

### A. Tailwind CSS Migration (Complete)
- ‚úÖ Dependencies installed (`tailwindcss`, `postcss`, `autoprefixer`).
- ‚úÖ Tailwind config with brand palette, spacing scale, dark mode.
- ‚úÖ Global styles replaced with Tailwind directives; legacy CSS removed.

### B. Theme System (Complete)
- ‚úÖ `ThemeContext` with auto/Light/Dark modes and localStorage persistence.
- ‚úÖ App wrapped in `ThemeProvider`; sidebar toggle cycles Light ‚Üí Dark ‚Üí Auto.
- ‚úÖ Dark-mode color tokens wired into Tailwind config.

### C. Intelligent Defaults (Complete)
- ‚úÖ `DEFAULT_PROFILE_VALUES` centralizes model parameters (temperature, topP, penalties).
- ‚úÖ `ModelProfile` types extended with `topP`, `frequencyPenalty`, `presencePenalty`.
- ‚úÖ Profile form updated with helper text + new inputs; LM Studio client sends the values.

### D. Component Library & Layout Refresh (Complete)
- ‚úÖ Modal, Button, and Card primitives implemented with Tailwind variants.
- ‚úÖ Dashboard, Profiles, Runs, and Run Detail screens migrated to Tailwind layout patterns.
- ‚úÖ Diagnostics and run workflows respect the new design system.

### E. UI Polish (Phase 5, Not Started)
- ‚¨ú Apply consistent spacing scale across pages.
- ‚¨ú Enhance card/panel styling for visual hierarchy.
- ‚¨ú Improve status pills, table hover states, and form field affordances.
- ‚¨ú Add subtle transitions where beneficial.

### F. LM Studio Model Discovery & Auto Profiles (New, In Progress)
Goal: When LM Studio is running locally, automatically fetch its available models, capture capability metadata, and present them as pre-populated profiles that can be adopted or customized.

- üü° **Discovery Client**
  - Implement `lmStudioDiscoveryClient` service to call `GET /api/v0/models` (rich metadata) with fallback to `GET /v1/models`.
  - Normalize payload into internal `DiscoveredModel` records (id, type, context window, quantization, capabilities array, load state).
- ‚¨ú **Benchmark Context Integration**
  - Extend `BenchmarkContext` to store discovered models alongside saved profiles.
  - Add load/refresh actions that fetch on app start and via manual refresh in Profiles tab.
- ‚¨ú **Auto Profile Generation**
  - Map discovered models into default profile entries (base URL, model id, capability tags) while keeping user-created profiles separate.
  - Flag autogenerated profiles to prevent accidental edits from overwriting persistent user data.
- ‚¨ú **UI Updates**
  - Update Profiles tab to display ‚ÄúDiscovered Models‚Äù section with capability badges (e.g., `tool_use`, `vision`, `embeddings`) and load state.
  - Provide CTA to adopt/clone a discovered model into a persistent profile.
- ‚¨ú **Resilience & Telemetry**
  - Handle offline LM Studio gracefully (retry strategy, UI messaging).
  - Surface last sync timestamp and error state in diagnostics drawer.

## Upcoming Milestones
1. Finish LM Studio discovery client and context plumbing so models auto-populate on load.
2. Ship Profiles UI updates that clearly separate discovered models from saved profiles and allow quick adoption.
3. Complete Phase 5 polish tasks once the discovery experience is stable.

## Risks & Mitigations
- **LM Studio server availability** ‚Äì Mitigate with retries, offline messaging, and manual refresh controls.
- **Payload drift between `/api/v0/models` versions** ‚Äì Guard with type-safe parsing, optional chaining, and capability defaults.
- **Profile confusion** ‚Äì Clearly label autogenerated entries and require explicit ‚ÄúSave as profile‚Äù before editing parameters.

## Open Questions
- Should discovered models auto-refresh in the background or only on user action?
- How should we persist capability metadata if LM Studio is unavailable after initial discovery?
- Do we want to pre-filter models (e.g., hide unloaded ones when JIT loading is off) or show the full list with load-state badges?

## Progress Tracking Legend
- ‚úÖ Completed
- üü° In Progress
- ‚¨ú Not Started
- ‚è≠Ô∏è Skipped

